<div class="col-md-6">
  <div class="panel panel-danger">

    <div class="panel-heading">
      <h2>
        Top Leagues
        <span class="text-muted">within Leaderboard</span>
      </h2>
    </div>

    <div class="panel-body">
      <input class="form-control" style="margin-bottom: 15px" type="text" placeholder="Filter by League Name"
              ng-model="leagueFilterModel.name" wd-keydown="filter('Top Leagues', leagueFilterModel.name)">

      <small>Sort by</small>

      <div class="btn-group">
        <button class="btn btn-xs btn-default dropdown-toggle" type="button" data-toggle="dropdown">
          average {{topLeagues.statsLabel()}} <i class="fa fa-chevron-down"></i>
        </button>

        <ul class="dropdown-menu" role="menu">
          <li><a href="" ng-click="topLeagues.sortBy('avgSkillPoints')">average skill points</a></li>
          <li><a href="" ng-click="topLeagues.sortBy('avgPveCr')">average PvE CR</a></li>
          <li><a href="" ng-click="topLeagues.sortBy('avgPvpCr')">average PvP CR</a></li>
        </ul>
      </div>

      <hr>

      <h2 ng-if="topLeagues.leagues.length === 0">
        <i class="fa fa-spin fa-circle-o-notch"></i> Loading...
      </h2>

      <table class="wd-table">
        <tbody>
          <tr ng-repeat="league in topLeagues.leagues | filter:leagueFilterModel"
              ng-show="isVisible('leagues', $index)">

            <td>
              <small class="text-muted"># {{league.leaderboardRank}}</small>
              <h2>
                <a ng-href="{{league.path}}">
                  <i class="fa fa-chevron-circle-right"></i> {{league.name}}
                </a>
              </h2>
              <small>{{league.members.length}} Members</small>
              <small class="text-muted">({{league.world.toUpperCase()}})</small>
            </td>

            <td>
              <table class="average pull-right">
                <tr>
                  <td colspan="2" class="text-muted"><strong>Avg</strong></td>
                </tr>

                <tr>
                  <td><small class="text-muted">skill points</small></td>
                  <td class="text-right">{{league.avgSkillPoints}}</td>
                </tr>

                <tr>
                  <td><small class="text-muted">PvE CR</small></td>
                  <td class="text-right">{{league.avgPveCr}}</td>
                </tr>

                <tr>
                  <td><small class="text-muted">PvP CR</small></td>
                  <td class="text-right">{{league.avgPvpCr}}</td>
                </tr>
              </table>
            </td>

          </tr>
        </tbody>
      </table>

      <div class="clearfix" style="margin-top: 5px" ng-show="!showAll.leagues && topLeagues.leagues.length > 0">
        <button class="btn btn-default pull-right" ng-click="showMore('Top Leagues', 'leagues')">Show More</button>
      </div>

    </div>
  </div>
</div>
